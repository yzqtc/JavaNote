<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>浮点变量和浮点常量</title>
	</head>
	<script type="text/javascript" src="../js/index/import.js"></script>
	<body>
		<!--
        	作者：1548185173@qq.com
        	时间：2020-02-23
        	描述：浮点变量和浮点常量
        -->
        <center>
			<h1>整型变量和整型常量</h1>  
        </center>
		<div>
			<ul>
				<li id="1" class="fontsize thick">浮点型变量/常量</li>					
			</ul>
			<ul class="ul">
				<li class="fontsize null_string">
					 带小数的数据在Java中称为浮点型，浮点型可分为float类型和double类型
				</li>					
			</ul>
			<ul class="ul">
				<li class="fontsize margin_left40">
					<table border="1px solid" bordercolor="#d0d0d0" cellpadding="0" cellspacing="0" width="800px" height="150px">
						<tr align="center">
							<td colspan="3">浮点型数据类型</td>
						</tr>
						<tr align="center">
							<td>整型</td>
							<td>占用存储空间</td>
							<td>表数范围</td>
						</tr>
						<tr>
							<td align="center">float</td>
							<td align="center">4字节</td>
							<td align="left">-3.403E38~3.403E38</td>
						</tr>
						<tr>
							<td align="center">double</td>
							<td align="center">8字节</td>
							<td align="left">-1.798E308~1.798E308</td>
						</tr>
					</table>
				</li>					
			</ul>
			<ul class="ul">
				<li class="fontsize null_string">
					float类型又被称作单精度类型，尾数可以精确到7位有效数字，在很都情况下，float类型的精度很难满足需求。而double表示这种类型的数值精度约是float类型的两倍，又被称作双精度类型，绝大部分应用程序都采用double类型。浮点型常量默认类型也是double
				</li>
			</ul>
			<ul class="ul">
				<li class="fontsize null_string">
					[示例1]使用科学计数法给浮点型变量赋值:
				</li>					
			</ul>
			<div class="margin_left80 code_border position_relative">
				<div class="fontsize number_border">
					<div class="code_number_border">1</div>
					<div class="code_number_border">2</div>
				</div>
				<div class="fontsize" id="codediv_1">
					<div>double d = 314e2; //314*10^2-->31400.0</div>
					<div>double d2 = 314e-2; //314*10^(-2)-->3.14</div>
				</div>
				<div class="copy" id="copy_1" style="cursor: pointer;" data-clipboard-action="copy" data-clipboard-target="#codediv_1">复制</div>
			</div>
			<ul class="ul">
				<li class="fontsize null_string">
					float类型的数值有一个后缀F后者f，没有后缀F/f的浮点数默认为double类型。也可以在浮点数值后添加后缀D后者d，以明确其为double类型
				</li>					
			</ul>
			<ul class="ul">
				<li class="fontsize null_string">
					[示例2]float类型赋值时需要添加后缀F/f
				</li>					
			</ul>
			<div class="margin_left80 code_border position_relative">
				<div class="fontsize number_border">
					<div class="code_number_border">1</div>
					<div class="code_number_border">2</div>
					<div class="code_number_border">3</div>
				</div>
				<div class="fontsize" id="codediv_2">
					<div>float f = 3.14F;</div>
					<div>double d1 = 3.14;</div>
					<div>double d2 = 3.14D;</div>
				</div>
				<div class="copy" id="copy_2" style="cursor: pointer;" data-clipboard-action="copy" data-clipboard-target="#codediv_2">复制</div>
			</div>
			<ul class="ul">
				<li class="fontsize null_string color_red">
					注意:
				</li>					
			</ul>
			<ul class="ul">
				<li class="fontsize null_string">
					浮点类型float，double的数据不适合在不容许舍入误差的金融计算领域。如果需要进行不产生舍入误差的精确数字计算，需要使用BigDecimal类
				</li>					
			</ul>
			<ul class="ul">
				<li class="fontsize null_string">
					[示例3]浮点数比较一
				</li>					
			</ul>
			<div class="margin_left80 code_border position_relative">
				<div class="fontsize number_border">
					<div class="code_number_border">1</div>
					<div class="code_number_border">2</div>
					<div class="code_number_border">3</div>
				</div>
				<div class="fontsize" id="codediv_3">
					<div>float f = 0.1f;</div>
					<div>double d = 1.0/10;</div>
					<div>System.out.println(f == d);//结果为false</div>
				</div>
				<div class="copy" id="copy_3" style="cursor: pointer;" data-clipboard-action="copy" data-clipboard-target="#codediv_3">复制</div>
			</div>
			<ul class="ul">
				<li class="fontsize null_string">
					[示例4]浮点数比较二
				</li>					
			</ul>
			<div class="margin_left80 code_border position_relative">
				<div class="fontsize number_border">
					<div class="code_number_border">1</div>
					<div class="code_number_border">2</div>
					<div class="code_number_border">3</div>
					<div class="code_number_border">4</div>
					<div class="code_number_border">5</div>
					<div class="code_number_border">6</div>
					<div class="code_number_border">7</div>
				</div>
				<div class="fontsize" id="codediv_4">
					<div>float f1 = 423432423f;</div>
					<div>float f2 = f1 + 1;</div>
					<div>if(f1 == f2){</div>
					<div class="right_1">System.out.println("f1 == f2");</div>
					<div>}else</div>
					<div class="right_1">System.out.println("f1 != f2");</div>
					<div>}</div>
				</div>
				<div class="copy" id="copy_4" style="cursor: pointer;" data-clipboard-action="copy" data-clipboard-target="#codediv_4">复制</div>
			</div>
			<ul class="ul">
				<li class="fontsize null_string">
					运行以上两个示例，发现示例3的结果是"false"，而示例4的输出结果是"f1 == f2"。这是因为字长有限，浮点数能够精确表示的数是有限的，因而也是离散的。浮点数一般都存在舍入误差，很多数字无法精确表示(例如0.1)，其结果只能是接近，但不等于。二进制浮点数不能精确的表示0.1,0.01，0.001这样10的负次幂。并不是所有的小数都能精确的用二进制浮点数表示
				</li>					
			</ul>
			</ul><ul class="ul">
				<li class="fontsize null_string">
					java.math包下面的两个有用的类：BigInteger和BigDecimal，这两个类可以处理任意长度的数值。BigInteger实现了任意精度的整数运算。BigDecimal实现了任意精度的浮点运算
				</li>					
			</ul>
			<ul class="ul">
				<li class="fontsize null_string color_red">
					注意:
				</li>					
			</ul>
			<ul class="ul">
				<li class="fontsize null_string">
					不要使用浮点数进行比较需要比较请使用BigDecimal
				</li>					
			</ul>
			<ul>
				<li id="2" class="fontsize thick">BigDecimal</li>					
			</ul>
			</ul><ul class="ul">
				<li class="fontsize null_string">
					[示例5]使用BigDecimal进行浮点数比较
				</li>					
			</ul>
			<div class="margin_left80 code_border position_relative">
				<div class="fontsize number_border">
					<div class="code_number_border">1</div>
					<div class="code_number_border">2</div>
					<div class="code_number_border">3</div>
					<div class="code_number_border">4</div>
					<div class="code_number_border">5</div>
					<div class="code_number_border">6</div>
					<div class="code_number_border">7</div>
					<div class="code_number_border">8</div>
					<div class="code_number_border">9</div>
					<div class="code_number_border">10</div>
					<div class="code_number_border">11</div>
					<div class="code_number_border">12</div>
					<div class="code_number_border">13</div>
				</div>
				<div class="fontsize" id="codediv_5">
					<div>import java.math.BigDecimal</div>
					<div>public class Main{</div>
					<div class="right_1">public static void main(String[] args){</div>
					<div class="right_2">BigDecimal bd = BigDecimal.valueof(1.0);</div>
					<div class="right_2">bd = bd.subtract(BigDecimal.valueof(0.1));</div>
					<div class="right_2">bd = bd.subtract(BigDecimal.valueof(0.1));</div>
					<div class="right_2">bd = bd.subtract(BigDecimal.valueof(0.1));</div>
					<div class="right_2">bd = bd.subtract(BigDecimal.valueof(0.1));</div>
					<div class="right_2">bd = bd.subtract(BigDecimal.valueof(0.1));</div>
					<div class="right_2">System.out.println(bd);//0.5</div>
					<div class="right_2">System.out.println(1.0 - 0.1 - 0.1 - 0.1 - 0.1 - 0.1);//0.5000000000000001</div>
					<div class="right_1">}</div>
					<div>}</div>
				</div>
				<div class="copy" id="copy_5" style="cursor: pointer;" data-clipboard-action="copy" data-clipboard-target="#codediv_5">复制</div>
			</div>
		</div>
	</body>
</html>
